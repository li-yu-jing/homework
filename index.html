<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>街友安置體驗</title>
  <style>
    body {
      margin: 0;
      background-color: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: 'Noto Sans TC', sans-serif;
    }
    .game-container {
      width: 375px;
      height: 667px;
      position: relative;
      background-size: cover;
      background-position: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      overflow: hidden;
    }
    .content {
      position: absolute;
      bottom: 40px;
      width: 100%;
      text-align: center;
    }
    .btn {
      margin: 10px;
      padding: 10px 20px;
      border: none;
      font-size: 16px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .btn:hover {
      transform: scale(1.05);
    }
    .speech-bubble {
      position: absolute;
      bottom: 200px;
      left: 20px;
      right: 20px;
      background: rgba(255,255,255,0.9);
      padding: 10px 15px;
      border-radius: 10px;
      font-weight: bold;
      font-size: 16px;
      z-index: 2;
    }
    .start-screen {
      position: absolute;
      width: 100%;
      height: 100%;
      background: #111;
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 3;
      animation: fadeIn 1s ease forwards;
    }
    .start-screen h1 {
      font-size: 28px;
      margin-bottom: 20px;
    }
    .start-screen .btn {
      background-color: #4caf50;
      color: white;
    }
    .end-screen {
      position: absolute;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      z-index: 4;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      animation: fadeIn 2s ease forwards;
    }
    .end-message {
      background-color: rgba(0,0,0,0.6);
      color: white;
      padding: 20px;
      border-radius: 12px;
      font-size: 22px;
      text-align: center;
      margin-bottom: 20px;
    }
    @keyframes fadeOut {
      to {
        opacity: 0;
        visibility: hidden;
      }
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
  </style>
</head>
<body>
  <div class="game-container" id="game" style="background-image: url('社工關懷街頭無家者.png');">
    <div class="speech-bubble" id="speech">社工：要不要入住安置機構？</div>
    <div class="content" id="choices">
      <button class="btn" onclick="goTo('accept')">入住機構<br>你會有個安身之處</button>
      <button class="btn" onclick="goTo('decline')">不入住<br>你將繼續露宿街頭</button>
    </div>

    <div class="start-screen" id="startScreen">
      <h1>街友安置體驗</h1>
      <button class="btn" onclick="startGame()">開始遊戲</button>
    </div>

    <div class="end-screen" id="endScreen"></div>
  </div>

  <script>
    const scenes = {
      accept: {
        bg: '111111',
        speech: '你剛被安置進這間機構，身上帶著簡單的行李，內心混雜著疲憊與戒心。這裡比街頭安全，卻讓你感到陌生。生活開始規律，日復一日，有點無聊。',
        choices: [
          { text: '決定先觀察一陣子，獨自在房間休息', next: 'bbb' },
          { text: '趕快嘗試看看能不能適應新生活', next: 'aaa' }
        ]
      },
     aaa: {
        bg: '111111',
        speech: '是否參加安置機構團康活動',
        choices: [
          { text: '不願參加，找理由推託', next: 'eee' },
          { text: '勉強參加，但覺得無聊', next: 'fff' }
        ]
      },
      bbb: {
        bg: '111111',
        speech: '生活輔導員發現你在團體活動時間躲在房間內⋯⋯',
        choices: [
          { text: '草草應付參加活動', next: 'ccc' },
          { text: '拒絕並表現不滿', next: 'ddd' }
        ]
      },
      ddd: {
        bg: '111111',
        speech: '生活輔導員強硬要求你參與活動',
        choices: [
          { text: '草草應付參加活動', next: 'ccc' },
          { text: '拒絕並表現不滿', next: 'ddd' }
        ]
      },
    };

    function startGame() {
      document.getElementById('startScreen').style.animation = 'fadeOut 1s ease forwards';
      setTimeout(() => document.getElementById('startScreen').style.display = 'none', 1000);
    }

    function goTo(key) {
      const scene = scenes[key];
      document.getElementById('game').style.backgroundImage = scene.bg === '111111' ? 'none' : `url('${scene.bg}')`;
      document.getElementById('speech').innerText = scene.speech;

      const choicesHtml = scene.choices.map(choice =>
        `<button class="btn" onclick="goTo('${choice.next}')">${choice.text}</button>`
      ).join('');
      document.getElementById('choices').innerHTML = choicesHtml;

      if (scene.choices.length === 0) {
        document.getElementById('choices').innerHTML = '<button class="btn" onclick="location.reload()">重新開始</button>';
      }
    }
  </script>
</body>
</html>
